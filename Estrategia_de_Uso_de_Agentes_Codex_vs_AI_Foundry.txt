# Estrategia de Uso de Agentes: Codex vs AI Foundry

## ğŸ¯ CuÃ¡ndo usar cada tipo de agente

### Agentes Codex (Por defecto)
Usar para tareas cotidianas y desarrollo regular:

- âœ… **ImplementaciÃ³n de features** estÃ¡ndar
- âœ… **CorrecciÃ³n de bugs** simples a moderados
- âœ… **ActualizaciÃ³n de dependencias**
- âœ… **Escritura de tests** bÃ¡sicos
- âœ… **DocumentaciÃ³n** y comentarios
- âœ… **ConfiguraciÃ³n** de herramientas
- âœ… **Refactoring** simple (< 100 lÃ­neas)

### Agentes AI Foundry (Para complejidad alta)
Invocar para tareas que requieren anÃ¡lisis profundo:

- ğŸ” **AnÃ¡lisis de componentes TSX** complejos (> 200 lÃ­neas)
- ğŸ”„ **RefactorizaciÃ³n masiva** de cÃ³digo legacy
- ğŸ“Š **OptimizaciÃ³n de performance** crÃ­tica
- ğŸ—ï¸ **RediseÃ±o arquitectÃ³nico** de mÃ³dulos
- ğŸ§ª **GeneraciÃ³n de tests complejos** con edge cases
- ğŸ” **AnÃ¡lisis de seguridad** profundo
- ğŸ“ˆ **DetecciÃ³n de patrones** y anti-patterns

## ğŸ“‹ Matriz de DecisiÃ³n

| Tarea | Complejidad | Agente Recomendado | AI Foundry Support |
|-------|-------------|-------------------|-------------------|
| Agregar botÃ³n a UI | Baja | Mobile_App_Agent | No |
| Crear nuevo screen | Media | Mobile_App_Agent | Opcional |
| Refactorizar HomeScreen (300+ lÃ­neas) | Alta | Mobile_App_Agent | ReadTsxAgent |
| Optimizar bundle size | Alta | Mobile_App_Agent | PerformanceOptimizer |
| Crear GraphQL resolver | Media | Backend_Agent | No |
| Optimizar queries N+1 | Alta | Backend_Agent | RefactorAgent |
| AnÃ¡lisis de arquitectura | Muy Alta | Architect_BoatRental | ArchitectureAnalyzer |
| Generar tests E2E | Alta | Cualquiera | TestingExpert |

## ğŸ”„ Flujo de Trabajo HÃ­brido

```mermaid
graph TD
    A[Nueva Tarea] --> B{Complejidad?}
    B -->|Baja-Media| C[Agente Codex]
    B -->|Alta| D[AnÃ¡lisis Inicial Codex]
    D --> E[Invocar AI Foundry]
    E --> F[AnÃ¡lisis Profundo]
    F --> G[Recomendaciones]
    G --> H[ImplementaciÃ³n Codex]
    C --> I[Resultado]
    H --> I[Resultado]
    I --> J{Satisfactorio?}
    J -->|No| K[Escalar a AI Foundry]
    J -->|SÃ­| L[Completado]
    K --> E
```

## ğŸš€ Comandos de InvocaciÃ³n

### InvocaciÃ³n Manual de AI Foundry

```bash
# Para anÃ¡lisis de componente TSX
@codex invoke-foundry --agent ReadTsxAgent --file mobile-app/src/screens/home/HomeScreen.tsx

# Para refactorizaciÃ³n compleja
@codex invoke-foundry --agent RefactorAgent --complexity high --module mobile-app

# Para anÃ¡lisis de arquitectura
@codex invoke-foundry --agent ArchitectureAnalyzer --scope full-project
```

### Triggers AutomÃ¡ticos

Los agentes AI Foundry se invocan automÃ¡ticamente cuando:

1. **Complejidad CiclomÃ¡tica > 15**
   ```
   Trigger: RefactorAgent
   Notifica: Agente responsable del mÃ³dulo
   ```

2. **Archivo > 500 lÃ­neas**
   ```
   Trigger: ReadTsxAgent (para TSX) o RefactorAgent (otros)
   Notifica: Mobile_App_Agent o Backend_Agent
   ```

3. **Cobertura de Tests < 70%**
   ```
   Trigger: TestingExpert
   Notifica: Todos los agentes relevantes
   ```

4. **Performance Regression Detectada**
   ```
   Trigger: PerformanceOptimizer
   Notifica: Mobile_App_Agent + Backend_Agent
   ```

## ğŸ’° Consideraciones de Costo

### Uso Eficiente
- **Codex First**: Siempre intentar con agentes Codex primero
- **Batch Operations**: Agrupar anÃ¡lisis complejos
- **Cache Results**: Los resultados de AI Foundry se cachean por 24h
- **Rate Limiting**: Respetar lÃ­mites (6 req/min para GPT-3.5)

### Presupuesto Mensual Sugerido
- Desarrollo activo: 80% Codex, 20% AI Foundry
- Mantenimiento: 95% Codex, 5% AI Foundry
- RefactorizaciÃ³n mayor: 60% Codex, 40% AI Foundry

## ğŸ“Š MÃ©tricas de Ã‰xito

| MÃ©trica | Target | MediciÃ³n |
|---------|--------|----------|
| Tiempo de resoluciÃ³n | -30% | Con AI Foundry vs sin |
| Calidad del cÃ³digo | +25% | Score de complejidad |
| Cobertura de tests | >85% | Jest coverage |
| Bugs post-refactor | <5% | Issues reportados |

## ğŸ”§ ConfiguraciÃ³n Recomendada

```yaml
# En .codegpt.yaml
ai_foundry:
  enabled: true
  auto_invoke: true
  complexity_threshold: 15
  file_size_threshold: 500
  test_coverage_threshold: 70
  
  agents:
    - ReadTsxAgent
    - RefactorAgent
    - ArchitectureAnalyzer
    - PerformanceOptimizer
    - TestingExpert
```

## ğŸ“ Mejores PrÃ¡cticas

1. **Documentar Decisiones**: Cuando uses AI Foundry, documenta por quÃ©
2. **Review Humano**: Siempre revisar sugerencias de AI Foundry
3. **IteraciÃ³n**: Usar AI Foundry para anÃ¡lisis, Codex para implementaciÃ³n
4. **Monitoreo**: Trackear mÃ©tricas de uso y ROI
5. **Feedback Loop**: Ajustar umbrales basÃ¡ndose en resultados

---

*Este documento debe actualizarse mensualmente basÃ¡ndose en mÃ©tricas de uso y feedback del equipo.*