"/api/ejecutar-cli":
  post:
    summary: "Ejecutar cualquier comando con redirección automática"
    description: "Ejecuta comandos Azure CLI, Python, PowerShell, Bash o cualquier otro. Detecta automáticamente el tipo y redirige a ejecutor apropiado. NUNCA rechaza comandos."
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              comando:
                type: string
                example: "python script.py"
                description: "Cualquier comando válido del sistema"
            required:
              - comando
    responses:
      200:
        description: "Comando ejecutado exitosamente (Azure CLI o genérico)"
        content:
          application/json:
            schema:
              type: object
              properties:
                exito:
                  type: boolean
                  example: true
                comando:
                  type: string
                  example: "python script.py"
                tipo_comando:
                  type: string
                  enum: ["azure_cli", "python", "powershell", "bash", "generic"]
                  example: "python"
                resultado:
                  type: string
                  example: "Script ejecutado correctamente"
                codigo_salida:
                  type: integer
                  example: 0
                tiempo_ejecucion:
                  type: string
                  example: "<60s"
                ejecutor:
                  type: string
                  enum: ["azure_cli", "subprocess_fallback", "fallback_generico"]
                  example: "subprocess_fallback"
              required:
                - exito
                - comando
                - tipo_comando
      500:
        description: "Error en ejecución del comando"
        content:
          application/json:
            schema:
              type: object
              properties:
                exito:
                  type: boolean
                  example: false
                comando:
                  type: string
                error:
                  type: string
                  example: "Comando falló con código de salida 1"
                codigo_salida:
                  type: integer
                  example: 1
                tipo_error:
                  type: string
              required:
                - exito
                - comando
                - error
      400:
        description: "Solicitud inválida (falta parámetro comando)"
        content:
          application/json:
            schema:
              type: object
              properties:
                exito:
                  type: boolean
                  example: false
                error:
                  type: string
                  example: "Falta el parámetro 'comando'"
                ejemplo:
                  type: object
                  properties:
                    comando:
                      type: string
                      example: "storage account list"

